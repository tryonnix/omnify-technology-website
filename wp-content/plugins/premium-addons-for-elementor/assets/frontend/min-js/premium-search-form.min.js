!function(e){function a(n,r){var t=n.data("id"),o=(n=r(".elementor-element-"+t)).find(".premium-search__container"),l=o.data("settings"),s=n.find(".premium-search__input"),d=n.find(".premium-search__spinner"),c=l.query,e=l.buttonAction,p=null,u=getComputedStyle(n[0]).getPropertyValue("--pa-search-hightlight");if("post"===c){var m=n.find(".premium-search__query-wrap"),i=1;l.hideOnClick&&r("body").on("click",function(e){r(e.target).is(n.find(".premium-search__container, .premium-search__container *, .premium-search__query-wrap, .premium-search__query-wrap *"))||m.html("").addClass("query-hidden")})}function a(e){setTimeout(function(){var i=s.val();if(!o.hasClass("fetching")&&i!==p){if("post"===c&&m.html("").addClass("query-hidden"),"elements"!==c)""!==i&&r.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:1,widget_id:n.data("id"),query:i,post_type:o.find(".premium-search__type-select").val(),results_number:l.results_number},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),d.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){if(e.data){var a,i,t,r=e.data.posts,s=e.data.pagination;d.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),m.html(r).removeClass("query-hidden"),l.carousel&&m.find(".premium-search__posts-wrap").slick((a=getComputedStyle(n[0]).getPropertyValue("--pa-search-carousel-slides"),i=l.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-prev" aria-label="Previous" role="button" style=""><i class="fas fa-angle-left" aria-hidden="true"></i></a>':"",t=l.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-next" aria-label="Next" role="button" style=""><i class="fas fa-angle-right" aria-hidden="true"></i></a>':"",{infinite:!1,draggable:!0,autoplay:!1,slidesToShow:a=parseInt(100/a.substr(0,a.indexOf("%"))),slidesToScroll:l.slidesToScroll||a,rows:l.rows,speed:l.speed,nextArrow:t,prevArrow:i,fade:l.fade,centerMode:l.center,centerPadding:l.spacing+"px",dots:l.dots,customPaging:function(){return'<i class="fas fa-circle"></i>'}})),h(),""!==s&&(m.append("<div class='premium-search__footer'></div>"),m.find(".premium-search__footer").html(s)),o.removeClass("fetching")}},error:function(e){console.log(e),d.find(".premium-loading-feed").remove(),o.removeClass("fetching")}});else{var e=r(l.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i"),a=r(l.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i");if(e.css("transition","filter 0.3s ease-in-out"),a.css("transition","opacity 0.3s ease-in-out"),e.find(".pa-highlighted-text-"+t).removeClass("pa-highlighted-text-"+t),e.css("filter","blur(0px)"),a.css("opacity","1"),""!==i){if(i=i.trim().toLowerCase(),e.filter(function(){return-1==r(this).text().toLowerCase().indexOf(i)}).css("filter","blur(3px)"),a.css("opacity","0.4"),u)e.filter(function(){return-1!==r(this).text().toLowerCase().indexOf(i)}).map(function(e,a){r(this).is(":visible")&&"LI"!==r(this).prop("tagName")&&(a=(a=r(this).text().toLowerCase()).replace(new RegExp(i,"g"),'<span class="pa-highlighted-text pa-highlighted-text-'+t+'">'+i+"</span>"),r(this).html(a))})}else e.css("filter","blur(0px)"),e.find(".pa-highlighted-text-"+t).removeClass("pa-highlighted-text-"+t),a.css("opacity","1")}p=i}},"remove"===e?10:"elements"===c?100:1e3)}function h(){var t=new Array,e=o.find(".premium-search__post-content");e.each(function(e,a){var i=r(a).outerHeight();t.push(i)});var a=Math.max.apply(null,t);e.css("height",a+"px")}"onpage"===e?(o.on("click",".premium-search__btn",a),s.on("keyup",function(){var e=s.val();e!==p&&"post"===c&&m.html("").addClass("query-hidden"),""===e&&(r(l.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("filter","blur(0px)"),r(l.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("opacity","1"))})):o.on("click",".premium-search__btn",function(){var e=s.val(),a=o.find(".premium-search__type-select").val()||[];window.location.href=l.search_link+"?s="+e+"&post_type="+a}),o.on("click",".premium-search__remove-wrap",function(){s.val(""),a("remove")}),o.find(".premium-search__type-select").on("change",function(){p="",a()}),s.on("keyup",a),document.addEventListener("keydown",function(e){o.hasClass("is-focused")&&13===e.keyCode&&a()}),s.on("focus blur",function(e){o.toggleClass("is-focused"),"focus"===e.type&&(p="",a())}),n.hasClass("premium-search-anim-label-letter")&&(s.on("focus",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e+3+"px")}),s.on("blur",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e-3+"px")})),n.on("click",".premium-search-form__pagination-container .page-numbers",function(e){if(e.preventDefault(),!r(this).hasClass("current")){var a=parseInt(n.find(".page-numbers.current").html());i=r(this).hasClass("next")?a+1:r(this).hasClass("prev")?a-1:r(this).html(),r.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:i,widget_id:n.data("id"),query:p,post_type:o.find(".premium-search__type-select").val(),results_number:l.results_number},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),m.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){if(e.data){var a=e.data.posts,i=e.data.pagination;m.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),m.html(a).removeClass("query-hidden"),h(),m.append("<div class='premium-search__footer'></div>"),m.find(".premium-search__footer").html(i),o.removeClass("fetching")}},error:function(e){console.log(e),d.find(".premium-loading-feed").remove(),o.removeClass("fetching")}})}})}e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/premium-search-form.default",a)})}(jQuery);